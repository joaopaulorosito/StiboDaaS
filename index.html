<!DOCTYPE html>
<html>
<head>
    <title>GraphQL Data</title>
</head>
<body>
    <div id="books-list">
        <!-- Os livros serão exibidos aqui -->
    </div>
    <script>
        // Função para fazer a solicitação GraphQL
        function fetchGraphQLData() {
            const endpoint = 'https://daas-presales-demo-1.daas.stibosystems.com/api/services/LatamPresales/graphql/api'; // Substitua pela sua própria URL da API GraphQL
            const token = 'V2s0QjdUc3hlQ0tOM2RMZVJ4eG96dm92dzB1dDZ5bjZFVThwTGlZZERiNHlndEhrZ1BKVXFUZ3djcnkxcjlWNXJMMVZsSjQvdXRsZjd0cz0='; // Adicione seu token de autorização (se necessário)

            const query = `
            query{
  produtosVenda (scope: "LatamDemo,Context3" first:15 after:"")
  {
  pageInfo {     
    hasNextPage     
    endCursor   
  } 
  pageElements {
    id    
    name		
    EAN 
    CriadorRegistro    
    DescricaoCurta   }  
  }
}
            `;

            fetch(endpoint, {
                method: 'POST',
                headers: {
                    'accept': 'application/json',
                    'x-functions-key': `${token}` // Adicione o token de autorização (se necessário)
                },
                body: JSON.stringify({ query })
            })
            .then(response => response.json())
            .then(data => {
                const repository = data.data.repository;
                const booksList = document.getElementById('books-list');

                // Crie e adicione os elementos na página
                const bookElement = document.createElement('div');
                bookElement.innerHTML = `
                    <h2>${repository.name}</h2>
                    <p>${repository.description}</p>
                    <p>Estrelas: ${repository.stargazerCount}</p>
                `;

                booksList.appendChild(bookElement);
            })
            .catch(error => console.error('Erro:', error));
        }

        // Chame a função quando a página carregar
        window.onload = fetchGraphQLData;
    </script>
</body>
</html>
